<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Panditan Di Hatti</title>
  <link rel="icon" type="image/png" href="images/LOGO.png" />
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Poppins&display=swap');
    body { font-family: 'Poppins', sans-serif; margin: 0; padding: 0; background: #fffdf6; color: #333; }
    header.hero { background: linear-gradient(120deg, #ffc107, #ff9800); padding: 70px 20px 40px; text-align: center; position: relative; animation: fadeIn 1.5s ease-in-out; }
    header.hero img.logo { position: absolute; top: 15px; left: 15px; width: 70px; height: auto; }
    header.hero h1 { font-family: 'Playfair Display', serif; font-size: 3.2em; margin: 0; }
    header.hero .tagline { font-size: 1.2em; margin-top: 10px; font-style: italic; color: #4e342e; }
    header.hero .status { font-weight: bold; margin-top: 15px; font-size: 1.1em; }
    header.hero a.zomato-order { display: inline-block; margin-top: 20px; padding: 12px 25px; text-decoration: none; border-radius: 8px; font-weight: bold; transition: background 0.3s; }
    a.zomato-order.open { background: #e23744; color: white; }
    a.zomato-order.closed { background: #ccc; color: #555; pointer-events: none; }
    section { padding: 40px 20px; max-width: 1000px; margin: auto; }
    section h2 { color: #b14520; font-size: 2em; font-family: 'Playfair Display', serif; margin-bottom: 15px; }
    .about img { max-width:100%; border-radius:12px; box-shadow:0 4px 10px rgba(0,0,0,0.1); margin-top:15px; }
    .menu-item { display:flex; align-items:center; gap:20px; flex-wrap:wrap; margin-bottom:25px; }
    .menu-item img { width:140px; height:100px; object-fit:cover; border-radius:10px; }
    .modi-promo { text-align:center; }
    .modi-promo iframe { width:300px; max-width:100%; border-radius:10px; margin:20px auto; display:block; }
    .timings ul { list-style:none; padding:0; font-size:1.1em; }
    .timings ul li { padding:8px; border-radius:6px; margin:5px 0; background:#fff0db; }
    .timings ul li.today { background:#ffd54f; font-weight:bold; animation:pulse 1.2s infinite; }
    .reviews .review { background:#fffaf0; padding:15px; margin-bottom:20px; border-radius:8px; box-shadow:0 3px 8px rgba(0,0,0,0.05); }
    .review strong { color:#d35400; }
    .review-link { text-align:center; margin:30px; }
    .review-link a { background:#3f51b5; color:white; padding:10px 20px; text-decoration:none; border-radius:8px; font-weight:bold; }
    .contact iframe { width:100%; height:300px; border:0; border-radius:10px; margin-top:20px; }
    .shop-img { display:block; margin:30px auto; max-width:1000px; width:100%; border-radius:12px; }
    footer { background:#ffe0b2; text-align:center; padding:20px; color:#333; }
    @keyframes fadeIn { 0%{opacity:0;transform:translateY(-20px);}100%{opacity:1;transform:translateY(0);} }
    @keyframes pulse {0%{background-color:#ffeb3b;}50%{background-color:#fff176;}100%{background-color:#ffeb3b;}}
  </style>
</head>
<body>
  <header class="hero">
    <img src="images/LOGO.png" class="logo" alt="Logo">
    <h1>Panditan Di Hatti</h1>
    <p class="tagline">Loading tagline...</p>
    <div id="openStatus" class="status">Checking status...</div>
    <a id="zomatoBtn" class="zomato-order" href="#" target="_blank">Order on Zomato</a>
  </header>

  <section class="about">
    <h2>About Us</h2>
    <p id="about-text">Loading...</p>
    <img id="owner-image" src="images/OWNER.png" alt="Owner Photo">
  </section>

  <section class="menu">
    <h2>Our Specialties</h2>
    <div id="menu-list">Loading menu...</div>
  </section>

  <section class="modi-promo">
    <h2>PM Modi Featured Us!</h2>
    <p>PM Narendra Modi‚Äôs fan pages featured our <strong>Besan Barfi</strong> ‚Äî and the love from India followed! üáÆüá≥</p>
    <div class="modi-video">
      <iframe width="100%" height="315" src="https://www.youtube.com/embed/QOZa-VSTyek" title="PM Modi YouTube Video" frameborder="0" allowfullscreen></iframe>
    </div>
  </section>

  <section class="timings">
    <h2>üïí Opening Hours</h2>
    <ul id="timing-list">
      <li>Sunday: <span>08:00 AM ‚Äì 08:30 PM</span></li>
      <li>Monday: <span>08:00 AM ‚Äì 08:30 PM</span></li>
      <li>Tuesday: <span>08:00 AM ‚Äì 08:30 PM</span></li>
      <li>Wednesday: <span>08:00 AM ‚Äì 08:30 PM</span></li>
      <li>Thursday: <span>08:00 AM ‚Äì 08:30 PM</span></li>
      <li>Friday: <span>08:00 AM ‚Äì 08:30 PM</span></li>
      <li>Saturday: <span>08:00 AM ‚Äì 08:30 PM</span></li>
    </ul>
  </section>

  <section class="reviews">
    <h2>‚≠ê Customer Reviews</h2>
    <div id="review-list">Loading reviews...</div>
    <div class="review-link"><a href="#reviews">‚úçÔ∏è Write a Review</a></div>
  </section>

  <section class="contact">
    <h2>Visit Us</h2>
    <p>üìç Near PG Degree College, Anu Market, Hamirpur (Anu), Himachal Pradesh<br>‚≠ê Rated 4.5‚òÖ (1,250+ reviews)</p>
    <iframe src="https://www.google.com/maps?q=31.750798576238175,76.51580599973934&z=17&output=embed" allowfullscreen loading="lazy"></iframe>
  </section>

  <img src="images/SHOP.avif" alt="Shop Front" class="shop-img">

  <footer>
    <p>¬© 2025 Panditan Di Hatti | Website designed by Harshit | Licensed under MIT</p>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/js-yaml@4.1.0/dist/js-yaml.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/marked-frontmatter@1.0.0/browser.min.js"></script>

  <script>
    const today = new Date().getDay();
    document.querySelectorAll('#timing-list li')[today].classList.add('today');
    const now = new Date();
    const totalMins = now.getHours() * 60 + now.getMinutes();
    const openMins = 8 * 60, closeMins = 20 * 60 + 30;
    const isOpen = totalMins >= openMins && totalMins <= closeMins;
    document.getElementById('openStatus').textContent = isOpen ? '‚úÖ We‚Äôre Open Now' : '‚ùå We‚Äôre Closed Now';
    document.getElementById('zomatoBtn').classList.add(isOpen ? 'open' : 'closed');

    async function fetchYAML(path) {
      const res = await fetch(path);
      const text = await res.text();
      return jsyaml.load(text);
    }

    async function fetchMarkdownList(folder) {
      const res = await fetch(`https://api.github.com/repos/harshitpandit/panditan-di-hatti/contents/${folder}`);
      const files = await res.json();
      const items = await Promise.all(
        files.filter(f => f.name.endsWith('.md')).map(async f => {
          const content = await fetch(f.download_url).then(r => r.text());
          return marked.parseFrontMatter(content);
        })
      );
      return items;
    }

    async function loadContent() {
      const settings = await fetchYAML('settings.yml');
      const about = await fetchYAML('about.yml');
      const menu = await fetchMarkdownList('content/menu');
      const reviews = await fetchMarkdownList('content/reviews');

      document.querySelector('.tagline').textContent = settings.tagline;
      document.querySelector('img.logo').src = settings.logo;
      document.getElementById('zomatoBtn').href = settings.zomato_link;

      document.getElementById('about-text').textContent = about.description;
      document.getElementById('owner-image').src = about.owner_image;

      document.getElementById('menu-list').innerHTML = menu.map(item => `
        <div class="menu-item">
          <img src="${item.image}" alt="${item.title}">
          <div><strong>${item.title}:</strong> ${item.description}</div>
        </div>
      `).join('');

      document.getElementById('review-list').innerHTML = reviews.map(r => `
        <div class="review"><strong>${r.name}:</strong> ${r.body}</div>
      `).join('');
    }

    window.addEventListener('DOMContentLoaded', loadContent);
  </script>
</body>
</html>
